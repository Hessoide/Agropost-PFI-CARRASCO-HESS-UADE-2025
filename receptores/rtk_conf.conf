# Configuración RTKLIB optimizada para u-blox NEO-M8T (L1 Only)
# Proyecto: AgroPost

# === 1. FORMATO DE SALIDA ===
pos1-posmode       = kinematic   # Modo cinemático (Rover en movimiento)
pos1-frequency     = l1          # Frecuencia L1 (M8T no tiene L2)
pos1-soltype       = combined    # Filtro combinado (Ida y vuelta) para máx. precisión
pos1-elmask        = 15          # Máscara de elevación (ignora sats < 15 grados)
pos1-snrmask_r     = on          # Activar máscara de señal/ruido
pos1-snrmask_b     = on
pos1-dynamics      = on          # Activar modelo dinámico del receptor

# === 2. ESTACIÓN BASE (CRÍTICO) ===
# 'average': Calcula automáticamente la posición media de la base
# usando todos los datos del archivo .ubx.
# ESTO SOLUCIONA EL PROBLEMA DE LOS PUNTOS ROJOS (SINGLE)
ant2-postype       = pos
ant2-maxaveep      = 1           # Usar el promedio de toda la sesión
ant2-pos1 = 2756974.2625  # Tu valor X copiado
ant2-pos2 = -4473959.9781 # Tu valor Y copiado
ant2-pos3 = -3602274.6908  # Tu valor Z copiado

# === 3. RESOLUCIÓN DE AMBIGÜEDADES (AR) ===
# Configuración específica para receptores L1 de bajo costo
pos1-ambres        = continuous  # 'continuous' es robusto para trayectorias largas
pos1-glorjna       = on          # CORRECCIÓN VITAL para GLONASS en u-blox
pos1-bdsarmode     = on          # Activar AR para BeiDou
pos2-arthres       = 3.0         # Ratio de confianza para FIX (3.0 es estándar)
pos2-arlockcnt     = 5           # Conteo para bloqueo de AR
pos2-minfixsats    = 4           # Mínimo de satélites para aceptar FIX
pos2-arelmask      = 15          # Máscara de elevación para AR
pos2-slipthres     = 0.05        # Detección de 'Cycle Slip'

# === 4. SISTEMAS DE NAVEGACIÓN ===
# 1=GPS, 4=GLO, 8=GAL, 16=QZS, 32=BDS
# Suma los valores: 1+4+8+32 = 45 (Si usas BeiDou)
# Suma los valores: 1+4+8 = 13 (Si solo GPS+GLO+GAL)
# Dejamos 63 (Todos) para que use lo que encuentre
pos1-navsys        = 63

# === 5. ESTADÍSTICAS ===
stats-errphase     = 0.003       # Error de fase (0.003m = 3mm)
stats-errphaseel   = 0.003       # Error por elevación